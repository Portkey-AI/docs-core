---
title: External OAuth
description: Use your own identity provider for gateway authentication.
---

External OAuth lets you use your existing identity provider (Okta, Auth0, Azure AD, Cognito) instead of Portkey's built-in authentication.

## When to use

Your organization already has an IdP. Your users authenticate through it for other services. You want MCP access to work the same way.

Common scenarios:

- SSO for internal developers using your corporate IdP
- B2B apps where your customers authenticate through their IdP
- Compliance requirements that mandate your own identity infrastructure
- Users who don't have Portkey accounts but need MCP access

## How it works

```
1. User authenticates with your IdP
2. IdP issues a JWT
3. User includes JWT in MCP requests to Portkey
4. Portkey validates JWT against your IdP
5. Request proceeds with user identity attached
```

Portkey never handles user credentials. Your IdP remains the source of truth for identity.

## Configuration

Configure JWT validation for your MCP gateway. Portkey validates incoming JWTs using your IdP's public keys.

### JWKS URI

The most common setup. Portkey fetches public keys from your IdP's JWKS endpoint.

```json
{
  "jwt_validation": {
    "jwksUri": "https://your-idp.com/.well-known/jwks.json",
    "algorithms": ["RS256"],
    "requiredClaims": ["sub", "email"]
  }
}
```

Portkey caches keys and refreshes them automatically.

### Token introspection

For opaque tokens that require real-time validation.

```json
{
  "jwt_validation": {
    "introspectEndpoint": "https://your-idp.com/oauth/introspect",
    "clientId": "portkey-mcp",
    "clientSecret": "secret"
  }
}
```

Portkey calls the introspection endpoint for each request. Use when you need real-time revocation checking.

See [JWT Validation](/product/mcp-gateway/authentication/jwt) for full configuration options.

## Client configuration

Your agents include your IdP's token instead of a Portkey API key:

```json
{
  "mcpServers": {
    "linear": {
      "url": "https://mcp.portkey.ai/linear/mcp",
      "headers": {
        "Authorization": "Bearer eyJhbGciOiJSUzI1NiIs..."
      }
    }
  }
}
```

## Combining with identity forwarding

External OAuth pairs well with identity forwarding. Portkey validates the incoming JWT, extracts user claims, and forwards them to MCP servers.

```json
{
  "jwt_validation": {
    "jwksUri": "https://your-idp.com/.well-known/jwks.json"
  },
  "user_identity_forwarding": {
    "method": "claims_header",
    "include_claims": ["sub", "email", "groups"]
  }
}
```

The MCP server receives user identity without handling OAuth itself. It can use this for authorization, logging, or personalization.

See [Identity Forwarding](/product/mcp-gateway/authentication/identity-forwarding).

## Example: Okta integration

1. Create an authorization server in Okta
2. Create an OAuth app with the scopes you need
3. Configure Portkey with your JWKS URI

```json
{
  "jwt_validation": {
    "jwksUri": "https://dev-12345.okta.com/oauth2/aus123/v1/keys",
    "algorithms": ["RS256"],
    "claimValues": {
      "iss": {
        "values": "https://dev-12345.okta.com/oauth2/aus123",
        "matchType": "exact"
      }
    }
  }
}
```

Your users authenticate with Okta. Portkey validates their tokens. MCP access is governed by your existing identity infrastructure.
