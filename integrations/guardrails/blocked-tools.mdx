---
title: "Blocked Tools"
description: "Control which AI tools can be used in requests by blocking specific tool types or function names."
---

The **Blocked Tools** guardrail allows you to control which AI tools and function calls can be used in requests. This is essential for:

- **Security**: Prevent agents from accessing sensitive tools like code execution or file operations
- **Cost Control**: Block expensive tool types to manage API costs
- **Compliance**: Restrict tool usage to approved functions only
- **Safety**: Prevent unintended actions from autonomous agents

## Supported Tool Types

The guardrail can block or allow the following tool types:

| Tool Type | Description |
|-----------|-------------|
| `function` | Custom function calling tools |
| `web_search_preview` | Web search preview capabilities |
| `web_search` | Web search tools |
| `file_search` | File search and retrieval tools |
| `code_interpreter` | Code execution tools |
| `computer_use` | Computer use/automation tools |
| `mcp` | Model Context Protocol tools |

## Configuration Options

### Block Specific Tool Types

Block certain tool types while allowing others:

```json
{
  "before_request_hooks": [
    {
      "id": "pg-blocked-tools-xxx",
      "blockedTypes": ["code_interpreter", "computer_use", "file_search"]
    }
  ]
}
```

### Allow Only Specific Tool Types (Allowlist)

Only permit specified tool types; all others will be blocked:

```json
{
  "before_request_hooks": [
    {
      "id": "pg-blocked-tools-xxx",
      "allowedTypes": ["function", "web_search"]
    }
  ]
}
```

### Block Specific Function Names

Block particular function names while allowing other functions:

```json
{
  "before_request_hooks": [
    {
      "id": "pg-blocked-tools-xxx",
      "blockedFunctionNames": ["execute_code", "delete_file", "run_shell_command"]
    }
  ]
}
```

### Allow Only Specific Function Names (Allowlist)

Only permit specified function names; all other function calls will be blocked:

```json
{
  "before_request_hooks": [
    {
      "id": "pg-blocked-tools-xxx",
      "allowedFunctionNames": ["get_weather", "search_database", "send_email"]
    }
  ]
}
```

## Setting Up Blocked Tools

<Frame>
<img src="/images/guardrails/blocked-tools.png" />
</Frame>

1. **Navigate to Guardrails**: Go to the `Guardrails` page and click `Create`
2. **Select Blocked Tools**: Choose the "Blocked Tools" guardrail from the list
3. **Configure the Rules**:
   - **Blocked Tool Types**: Select tool types to block
   - **Allowed Tool Types**: Or specify only the tool types to allow
   - **Blocked Function Names**: Enter specific function names to block
   - **Allowed Function Names**: Or specify only the function names to allow
4. **Save the Guardrail**: Name your guardrail and save it to get the associated Guardrail ID

## Example Implementation

<Tabs>
  <Tab title="NodeJS">
```js
import Portkey from 'portkey-ai';

const portkey = new Portkey({
    apiKey: "PORTKEY_API_KEY",
    config: "pc-***" // Config with blocked tools guardrail
});

// This request will be blocked if it contains disallowed tools
const response = await portkey.chat.completions.create({
    model: "@your-model-slug",
    messages: [
        { role: "user", content: "Search the web for latest news" }
    ],
    tools: [
        {
            type: "function",
            function: {
                name: "web_search",
                description: "Search the web"
            }
        }
    ]
});
```
  </Tab>
  <Tab title="Python">
```python
from portkey_ai import Portkey

portkey = Portkey(
    api_key="PORTKEY_API_KEY",
    config="pc-***"  # Config with blocked tools guardrail
)

# This request will be blocked if it contains disallowed tools
response = portkey.chat.completions.create(
    model="@your-model-slug",
    messages=[
        {"role": "user", "content": "Search the web for latest news"}
    ],
    tools=[
        {
            "type": "function",
            "function": {
                "name": "web_search",
                "description": "Search the web"
            }
        }
    ]
)
```
  </Tab>
</Tabs>

## Combining Blocklists and Allowlists

You can combine tool type and function name controls for granular access:

```json
{
  "before_request_hooks": [
    {
      "id": "pg-blocked-tools-xxx",
      "allowedTypes": ["function"],
      "blockedFunctionNames": ["execute_dangerous_code", "delete_all_files"]
    }
  ]
}
```

This configuration:
- Only allows `function` type tools (blocks web_search, code_interpreter, etc.)
- Within functions, blocks specific dangerous function names

<Note>
When both `blockedTypes` and `allowedTypes` are specified, `allowedTypes` takes precedence. The same applies to function names - `allowedFunctionNames` takes precedence over `blockedFunctionNames`.
</Note>

## Use Cases

### Restricting Agent Capabilities

Prevent autonomous agents from accessing potentially dangerous tools:

```json
{
  "blockedTypes": ["code_interpreter", "computer_use"],
  "blockedFunctionNames": ["execute_shell", "modify_system_settings"]
}
```

### Approved Functions Only

For production environments, only allow pre-approved functions:

```json
{
  "allowedTypes": ["function"],
  "allowedFunctionNames": ["get_customer_info", "update_ticket_status", "send_notification"]
}
```

### Block All Tool Usage

Completely disable tool calling for certain use cases:

```json
{
  "blockedTypes": ["function", "web_search_preview", "web_search", "file_search", "code_interpreter", "computer_use", "mcp"]
}
```

