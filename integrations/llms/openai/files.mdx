---
title: Files
description: Upload files to OpenAI
---

With Portkey, you can upload the file in [OpenAI format](https://platform.openai.com/docs/guides/batch#1-preparing-your-batch-file) and portkey will upload the file to OpenAI!

This is the most efficient way to
- Test your data with different foundation models
- Perform A/B testing with different foundation models
- Perform batch inference with different foundation models


## Uploading Files
<Tabs>
 <Tab title="Python">
```python
from portkey_ai import Portkey

# Initialize the Portkey client
portkey = Portkey(
    api_key="PORTKEY_API_KEY",  # Replace with your Portkey API key
    virtual_key="VIRTUAL_KEY"   # Add your provider's virtual key
)

upload_file_response = portkey.files.create(
  purpose="batch",
  file=open("file.pdf", "rb")
)

print(upload_file_response)
```
  </Tab>
    <Tab title="NodeJS">
```js
import Portkey from 'portkey-ai';

// Initialize the Portkey client
const portkey = new Portkey({
    apiKey: "PORTKEY_API_KEY",  // Replace with your Portkey API key
    virtualKey: "VIRTUAL_KEY"   // Add your provider's virtual key
});

const uploadFile = async () => {
  const file = await portkey.files.create({
    purpose: "batch",
    file: fs.createReadStream("file.pdf")
  });

  console.log(file);
}

await uploadFile();

```
  </Tab>
<Tab title="REST">
```sh
curl --location --request POST 'https://api.portkey.ai/v1/files' \
--header 'x-portkey-api-key: <portkey_api_key>' \
--header 'x-portkey-virtual-key: <virtual_key>' \
--form 'purpose="<purpose>"' \
--form 'file=@"<file_path>"'
```
</Tab>
  <Tab title="OpenAI NodeJS">
```js
import OpenAI from 'openai'; // We're using the v4 SDK
import { PORTKEY_GATEWAY_URL, createHeaders } from 'portkey-ai'

const openai = new OpenAI({
  apiKey: 'OPENAI_API_KEY', // defaults to process.env["OPENAI_API_KEY"],
  baseURL: PORTKEY_GATEWAY_URL,
  defaultHeaders: createHeaders({
    provider: "openai",
    apiKey: "PORTKEY_API_KEY" // defaults to process.env["PORTKEY_API_KEY"]
  })
});

const uploadFile = async () => {
  const file = await openai.files.create({
    purpose: "batch",
    file: fs.createReadStream("file.pdf")
  });

  console.log(file);
}

await uploadFile();
```
  </Tab>
    <Tab title="OpenAI Python">
```python
from openai import OpenAI
from portkey_ai import PORTKEY_GATEWAY_URL, createHeaders

openai = OpenAI(
    api_key='OPENAI_API_KEY',
    base_url=PORTKEY_GATEWAY_URL,
    default_headers=createHeaders(
        provider="openai",
        api_key="PORTKEY_API_KEY"
    )
)

upload_file_response = openai.files.create(
  purpose="batch",
  file=open("file.pdf", "rb")
)

print(upload_file_response)
```
  </Tab>
 
</Tabs>

## List Files
<Tabs>
 <Tab title="Python">
```python
from portkey_ai import Portkey

# Initialize the Portkey client
portkey = Portkey(
    api_key="PORTKEY_API_KEY",  # Replace with your Portkey API key
    virtual_key="VIRTUAL_KEY"   # Add your provider's virtual key
)

files = portkey.files.list()

print(files)
```
  </Tab>
    <Tab title="NodeJS">
```js
import Portkey from 'portkey-ai';

// Initialize the Portkey client
const portkey = new Portkey({
    apiKey: "PORTKEY_API_KEY",  // Replace with your Portkey API key
    virtualKey: "VIRTUAL_KEY"   // Add your provider's virtual key
});

const listFiles = async () => {
  const files = await portkey.files.list();

  console.log(files);
}

await listFiles();

```
  </Tab>
<Tab title="REST">
```sh
curl --location 'https://api.portkey.ai/v1/files' \
--header 'x-portkey-api-key: <portkey_api_key>' \
--header 'x-portkey-virtual-key: <virtual_key>'
```
</Tab>
  <Tab title="OpenAI NodeJS">
```js
import OpenAI from 'openai'; // We're using the v4 SDK
import { PORTKEY_GATEWAY_URL, createHeaders } from 'portkey-ai'

const openai = new OpenAI({
  apiKey: 'OPENAI_API_KEY', // defaults to process.env["OPENAI_API_KEY"],
  baseURL: PORTKEY_GATEWAY_URL,
  defaultHeaders: createHeaders({
    provider: "openai",
    apiKey: "PORTKEY_API_KEY" // defaults to process.env["PORTKEY_API_KEY"]
  })
});

const listFiles = async () => {
  const files = await openai.files.list();

  console.log(file);
}

await listFiles();
```
  </Tab>
    <Tab title="OpenAI Python">
```python
from openai import OpenAI
from portkey_ai import PORTKEY_GATEWAY_URL, createHeaders

openai = OpenAI(
    api_key='OPENAI_API_KEY',
    base_url=PORTKEY_GATEWAY_URL,
    default_headers=createHeaders(
        provider="openai",
        api_key="PORTKEY_API_KEY"
    )
)

files = openai.files.list()

print(files)
```
  </Tab>
 
</Tabs>


## Get File
<Tabs>
 <Tab title="Python">
```python
from portkey_ai import Portkey

# Initialize the Portkey client
portkey = Portkey(
    api_key="PORTKEY_API_KEY",  # Replace with your Portkey API key
    virtual_key="VIRTUAL_KEY"   # Add your provider's virtual key
)

file = portkey.files.retrieve(file_id="file_id")

print(file)
```
  </Tab>
    <Tab title="NodeJS">
```js
import Portkey from 'portkey-ai';

// Initialize the Portkey client
const portkey = new Portkey({
    apiKey: "PORTKEY_API_KEY",  // Replace with your Portkey API key
    virtualKey: "VIRTUAL_KEY"   // Add your provider's virtual key
});

const getFile = async () => {
  const file = await portkey.files.retrieve(file_id="file_id");

  console.log(file);
}

await getFile();

```
  </Tab>
<Tab title="REST">
```sh
curl --location 'https://api.portkey.ai/v1/files/<file_id>' \
--header 'x-portkey-api-key: <portkey_api_key>' \
--header 'x-portkey-virtual-key: <virtual_key>'
```
</Tab>
  <Tab title="OpenAI NodeJS">
```js
import OpenAI from 'openai'; // We're using the v4 SDK
import { PORTKEY_GATEWAY_URL, createHeaders } from 'portkey-ai'

const openai = new OpenAI({
  apiKey: 'OPENAI_API_KEY', // defaults to process.env["OPENAI_API_KEY"],
  baseURL: PORTKEY_GATEWAY_URL,
  defaultHeaders: createHeaders({
    provider: "openai",
    apiKey: "PORTKEY_API_KEY" // defaults to process.env["PORTKEY_API_KEY"]
  })
});

const getFile = async () => {
  const file = await openai.files.retrieve(file_id="file_id");

  console.log(file);
}

await getFile();
```
  </Tab>
    <Tab title="OpenAI Python">
```python
from openai import OpenAI
from portkey_ai import PORTKEY_GATEWAY_URL, createHeaders

openai = OpenAI(
    api_key='OPENAI_API_KEY',
    base_url=PORTKEY_GATEWAY_URL,
    default_headers=createHeaders(
        provider="openai",
        api_key="PORTKEY_API_KEY"
    )
)

file = openai.files.retrieve(file_id="file_id")

print(file)
```
  </Tab>
 
</Tabs>


## Get File Content
<Tabs>
 <Tab title="Python">
```python
from portkey_ai import Portkey

# Initialize the Portkey client
portkey = Portkey(
    api_key="PORTKEY_API_KEY",  # Replace with your Portkey API key
    virtual_key="VIRTUAL_KEY"   # Add your provider's virtual key
)

file_content = portkey.files.content(file_id="file_id")

print(file_content)
```
  </Tab>
    <Tab title="NodeJS">
```js
import Portkey from 'portkey-ai';

// Initialize the Portkey client
const portkey = new Portkey({
    apiKey: "PORTKEY_API_KEY",  // Replace with your Portkey API key
    virtualKey: "VIRTUAL_KEY"   // Add your provider's virtual key
});

const getFileContent = async () => {
  const file_content = await portkey.files.content(file_id="file_id");

  console.log(file_content);
}

await getFileContent();

```
  </Tab>
<Tab title="REST">
```sh
curl --location 'https://api.portkey.ai/v1/files/<file_id>/content' \
--header 'x-portkey-api-key: <portkey_api_key>' \
--header 'x-portkey-virtual-key: <virtual_key>'
```
</Tab>
  <Tab title="OpenAI NodeJS">
```js
import OpenAI from 'openai'; // We're using the v4 SDK
import { PORTKEY_GATEWAY_URL, createHeaders } from 'portkey-ai'

const openai = new OpenAI({
  apiKey: 'OPENAI_API_KEY', // defaults to process.env["OPENAI_API_KEY"],
  baseURL: PORTKEY_GATEWAY_URL,
  defaultHeaders: createHeaders({
    provider: "openai",
    apiKey: "PORTKEY_API_KEY" // defaults to process.env["PORTKEY_API_KEY"]
  })
});

const getFileContent = async () => {
  const file_content = await openai.files.content(file_id="file_id");

  console.log(file_content);
}

await getFileContent();
```
  </Tab>
    <Tab title="OpenAI Python">
```python
from openai import OpenAI
from portkey_ai import PORTKEY_GATEWAY_URL, createHeaders

openai = OpenAI(
    api_key='OPENAI_API_KEY',
    base_url=PORTKEY_GATEWAY_URL,
    default_headers=createHeaders(
        provider="openai",
        api_key="PORTKEY_API_KEY"
    )
)

file_content = openai.files.content(file_id="file_id")

print(file_content)
```
  </Tab>
 
</Tabs>


## Delete File
<Tabs>
 <Tab title="Python">
```python
from portkey_ai import Portkey

# Initialize the Portkey client
portkey = Portkey(
    api_key="PORTKEY_API_KEY",  # Replace with your Portkey API key
    virtual_key="VIRTUAL_KEY"   # Add your provider's virtual key
)

delete_file_response = portkey.files.delete(file_id="file_id")

print(delete_file_response)
```
  </Tab>
    <Tab title="NodeJS">
```js
import Portkey from 'portkey-ai';

// Initialize the Portkey client
const portkey = new Portkey({
    apiKey: "PORTKEY_API_KEY",  // Replace with your Portkey API key
    virtualKey: "VIRTUAL_KEY"   // Add your provider's virtual key
});

const deleteFile = async () => {
  const delete_file_response = await portkey.files.delete(file_id="file_id");

  console.log(delete_file_response);
}

await deleteFile();

```
  </Tab>
<Tab title="REST">
```sh
curl --location --request DELETE 'https://api.portkey.ai/v1/files/<file_id>' \
--header 'x-portkey-api-key: <portkey_api_key>' \
--header 'x-portkey-virtual-key: <virtual_key>'
```
</Tab>
  <Tab title="OpenAI NodeJS">
```js
import OpenAI from 'openai'; // We're using the v4 SDK
import { PORTKEY_GATEWAY_URL, createHeaders } from 'portkey-ai'

const openai = new OpenAI({
  apiKey: 'OPENAI_API_KEY', // defaults to process.env["OPENAI_API_KEY"],
  baseURL: PORTKEY_GATEWAY_URL,
  defaultHeaders: createHeaders({
    provider: "openai",
    apiKey: "PORTKEY_API_KEY" // defaults to process.env["PORTKEY_API_KEY"]
  })
});

const deleteFile = async () => {
  const delete_file_response = await openai.files.delete(file_id="file_id");

  console.log(delete_file_response);
}

await deleteFile();
```
  </Tab>
    <Tab title="OpenAI Python">
```python
from openai import OpenAI
from portkey_ai import PORTKEY_GATEWAY_URL, createHeaders

openai = OpenAI(
    api_key='OPENAI_API_KEY',
    base_url=PORTKEY_GATEWAY_URL,
    default_headers=createHeaders(
        provider="openai",
        api_key="PORTKEY_API_KEY"
    )
)

delete_file_response = openai.files.delete(file_id="file_id")

print(delete_file_response)
```
  </Tab>
 
</Tabs>
