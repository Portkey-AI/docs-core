---
title: 'Claude Code'
description: 'Integrate Portkey with Claude Code for enterprise-grade AI coding assistance with observability and governance'
---

Claude Code is Anthropic's agentic coding tool that lives in your terminal. Add Portkey to get:

- **Multiple Claude Providers** - Route through Anthropic, Bedrock, or Vertex AI
- **Observability** - track costs, tokens, and latency for every request
- **Reliability** - automatic fallbacks, retries, and caching
- **Governance** - budget limits, usage tracking, and team access controls

This guide shows how to configure Claude Code with Portkey in under 5 minutes.

<Note>
  For enterprise deployments across teams, see [Enterprise Governance](#3-enterprise-governance).
</Note>

# 1. Setup

<Steps>
<Step title="Add Provider">
Go to [Model Catalog](https://app.portkey.ai/model-catalog) â†’ **Add Provider**.

Select Anthropic, Bedrock, or Vertex AI as your provider.

<Frame>
<img src="/Screenshot2025-07-21at5.29.57PM.png" width="500"/>
</Frame>
</Step>

<Step title="Configure Credentials">
Enter your API key and create a slug like `anthropic-prod`.

<Frame>
<img src="/images/product/model-catalog/create-provider-page.png" width="500"/>
</Frame>
</Step>

<Step title="Get Portkey API Key">
Go to [API Keys](https://app.portkey.ai/api-keys) and generate your Portkey API key.
</Step>
</Steps>

# 2. Configure Claude Code

Edit your Claude Code settings file (`~/.claude/settings.json` or `.claude/settings.json` in your project):

```json
{
  "env": {
    "ANTHROPIC_BASE_URL": "https://api.portkey.ai",
    "ANTHROPIC_AUTH_TOKEN": "dummy",
    "ANTHROPIC_CUSTOM_HEADERS": "x-portkey-api-key: YOUR_PORTKEY_API_KEY\nx-portkey-provider: @anthropic-prod"
  }
}
```

<Info>
This configuration works for Anthropic, Bedrock, and Vertex AI. See [Anthropic's documentation](https://docs.anthropic.com/en/docs/claude-code/bedrock-vertex-proxies) for more details.
</Info>

Done! Monitor usage in the [Portkey Dashboard](https://app.portkey.ai/dashboard).

## Switch Providers

Change providers by updating the `x-portkey-provider` header:

```
@anthropic-prod
@bedrock-prod
@vertex-prod
```

## Max Plan / Anthropic OAuth (Enterprise)

For Max plan or Anthropic OAuth users:

```json
{
  "env": {
    "ANTHROPIC_BASE_URL": "https://api.portkey.ai",
    "ANTHROPIC_CUSTOM_HEADERS": "x-portkey-api-key: YOUR_PORTKEY_API_KEY"
  }
}
```

<Note>
**Want fallbacks, load balancing, or caching?** Create a [Portkey Config](/product/ai-gateway/configs) and add `x-portkey-config: YOUR_CONFIG_ID` to the headers. See [Enterprise Governance](#3-enterprise-governance) for examples.
</Note>

import AdvancedFeatures from '/snippets/portkey-advanced-features.mdx';

<AdvancedFeatures />