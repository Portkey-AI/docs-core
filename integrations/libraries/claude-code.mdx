---
title: 'Claude Code'
description: 'Integrate Portkey with Claude Code for enterprise-grade AI coding assistance with observability and governance'
---

Claude Code is Anthropic's agentic coding tool that lives in your terminal. Add Portkey to get:

- **Multiple Claude Providers** - Route through Anthropic, Bedrock, or Vertex AI
- **Observability** - track costs, tokens, and latency for every request
- **Reliability** - automatic fallbacks, retries, and caching
- **Governance** - budget limits, usage tracking, and team access controls

This guide shows how to configure Claude Code with Portkey in under 5 minutes.

<Note>
  For enterprise deployments across teams, see [Enterprise Governance](#3-enterprise-governance).
</Note>

# 1. Setup

<Steps>
<Step title="Add Provider">
Go to [Model Catalog](https://app.portkey.ai/model-catalog) → **Add Provider**.

Select Anthropic, Bedrock, or Vertex AI as your provider.

<Frame>
<img src="/Screenshot2025-07-21at5.29.57PM.png" width="500"/>
</Frame>
</Step>

<Step title="Configure Credentials">
Enter your API key and create a slug like `anthropic-prod`.

<Frame>
<img src="/images/product/model-catalog/create-provider-page.png" width="500"/>
</Frame>
</Step>

<Step title="Get Portkey API Key">
Go to [API Keys](https://app.portkey.ai/api-keys) and generate your Portkey API key.
</Step>
</Steps>

# 2. Configure Claude Code

Edit your Claude Code settings file (`~/.claude/settings.json` or `.claude/settings.json` in your project):

```json
{
  "env": {
    "ANTHROPIC_BASE_URL": "https://api.portkey.ai",
    "ANTHROPIC_AUTH_TOKEN": "dummy",
    "ANTHROPIC_CUSTOM_HEADERS": "x-portkey-api-key: YOUR_PORTKEY_API_KEY\nx-portkey-provider: @anthropic-prod"
  }
}
```

<Info>
This configuration works for Anthropic, Bedrock, and Vertex AI. See [Anthropic's documentation](https://docs.anthropic.com/en/docs/claude-code/bedrock-vertex-proxies) for more details.
</Info>

Done! Monitor usage in the [Portkey Dashboard](https://app.portkey.ai/dashboard).

## Switch Providers

Change providers by updating the `x-portkey-provider` header:

```
@anthropic-prod
@bedrock-prod
@vertex-prod
```

## Max Plan / Anthropic OAuth (Enterprise)

For Max plan or Anthropic OAuth users:

```json
{
  "env": {
    "ANTHROPIC_BASE_URL": "https://api.portkey.ai",
    "ANTHROPIC_CUSTOM_HEADERS": "x-portkey-api-key: YOUR_PORTKEY_API_KEY"
  }
}
```

<Note>
**Want fallbacks, load balancing, or caching?** Create a [Portkey Config](/product/ai-gateway/configs) and add `x-portkey-config: YOUR_CONFIG_ID` to the headers. See [Enterprise Governance](#3-enterprise-governance) for examples.
</Note>

# 3. Enterprise Governance

For organizations deploying Claude Code across development teams, Portkey provides:
- **Cost Management**: Budget limits and spend tracking per team
- **Access Control**: Team-specific API keys with role-based permissions
- **Usage Analytics**: Track patterns across teams and projects
- **Model Management**: Control which models teams can access

<AccordionGroup>
  <Accordion title="Set Budget Limits Per Team">

Create team-specific providers with budget and rate limits:

1. Go to [Model Catalog](https://app.portkey.ai/model-catalog) → **Add Provider**
2. Create providers for each team (e.g., `anthropic-frontend`, `bedrock-backend`)
3. Set budget and rate limits per provider

<Frame>
<img src="/images/product/model-catalog/create-provider-page.png" width="500"/>
</Frame>

  </Accordion>

  <Accordion title="Control Model Access">

Provision only the models each team needs:

<Frame>
<img src="/images/product/model-catalog/model-provisioning-page.png" width="500"/>
</Frame>

Each team's provider slug gives access only to their approved models.
</Accordion>

  <Accordion title="Add Reliability Features">

Use [Portkey Configs](/product/ai-gateway/configs) for fallbacks, load balancing, and caching.

Example: Fallback from Anthropic to Bedrock

```json
{
	"strategy": { "mode": "fallback" },
	"targets": [
		{ "provider": "@anthropic-prod" },
		{ "provider": "@bedrock-prod" }
	]
}
```

Create configs at [Configs](https://app.portkey.ai/configs).

  </Accordion>

  <Accordion title="Create Team API Keys">

Generate API keys with metadata tracking:

```python
from portkey_ai import Portkey

portkey = Portkey(api_key="YOUR_ADMIN_API_KEY")

api_key = portkey.api_keys.create(
    name="frontend-team",
    type="organisation",
    workspace_id="YOUR_WORKSPACE_ID",
    defaults={
        "metadata": {
            "environment": "production",
            "team": "frontend"
        }
    },
    scopes=["logs.view", "configs.read"]
)
```

See [API Keys docs](/api-reference/admin-api/control-plane/api-keys/create-api-key).
  </Accordion>

  <Accordion title="Monitor Usage">

Track everything in the Portkey dashboard:
- Cost by team
- Model usage patterns
- Request volumes and errors
- Detailed logs for debugging

<Frame>
  <img src="/images/integrations/observability.png" width="600"/>
</Frame>
</Accordion>

</AccordionGroup>

# Portkey Features

### Observability
Track 40+ metrics including cost, tokens, and latency across all providers. Filter by team or project using metadata.

<Frame>
  <img src="/images/integrations/observability.png" width="600"/>
</Frame>

### Request Logs
Every request logged with complete details:
- Full request/response payloads
- Cost breakdown
- Performance metrics

<Frame>
<img src="/images/llms/openai/logs.png"></img>
</Frame>

### 1600+ LLMs
Switch between any model through one interface:

<Card title="Supported Providers" icon="layer-group" href="/integrations/llms">
View all 1600+ supported models
</Card>

### Metadata Tracking
Track custom metrics:
- Language and framework usage
- Task types (generation vs. completion)
- Project-specific patterns

<Card title="Custom Metadata" icon="tag" href="/product/observability/metadata">
</Card>

### Enterprise Access

<CardGroup cols={2}>
<Card title="Budget Controls" icon="coins" href="/product/ai-gateway/virtual-keys/budget-limits">
Set spending limits with automatic cutoffs
</Card>

<Card title="SSO" icon="key" href="/product/enterprise-offering/org-management/sso">
Enterprise SSO integration
</Card>

<Card title="Organization Management" icon="building" href="/product/enterprise-offering/org-management">
Teams, projects, and role-based access
</Card>

<Card title="Audit Logs" icon="shield-check" href="/product/enterprise-offering/access-control-management#audit-logs">
Compliance and audit logging
</Card>
</CardGroup>

### Reliability
<CardGroup cols={3}>
  <Card title="Fallbacks" icon="life-ring" href="/product/ai-gateway/fallbacks">
    Auto-switch on provider failures
  </Card>
  <Card title="Conditional Routing" icon="route" href="/product/ai-gateway/conditional-routing">
    Route based on complexity or language
  </Card>
  <Card title="Load Balancing" icon="balance-scale" href="/product/ai-gateway/load-balancing">
    Distribute across providers
  </Card>
  <Card title="Caching" icon="database" href="/product/ai-gateway/cache-simple-and-semantic">
    Cache common patterns
  </Card>
  <Card title="Smart Retries" icon="refresh" href="/product/ai-gateway/automatic-retries">
    Automatic retry with backoff
  </Card>
  <Card title="Budget Limits" icon="shield-check" href="/product/ai-gateway/virtual-keys/budget-limits">
    Enforce spending limits
  </Card>
</CardGroup>

### Security Guardrails

Protect your codebase:
- Prevent API key exposure
- Block malicious patterns
- Enforce coding standards
- PII detection and masking

<Card title="Guardrails" icon="shield-check" href="/product/guardrails">
</Card>

# Next Steps

<Card title="Schedule a Demo" icon="calendar" href="https://portkey.sh/demo">
Schedule a 1:1 call with our team to see how Portkey can transform your development workflow with Claude Code
</Card>

**Join our Community**
- [Discord Community](https://portkey.sh/discord-report)
- [GitHub Repository](https://github.com/Portkey-AI)

<Note>
For enterprise support and custom features, contact our [enterprise team](https://calendly.com/portkey-ai).
</Note>
